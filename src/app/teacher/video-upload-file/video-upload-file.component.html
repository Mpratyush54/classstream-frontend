<div class="container-fluid center">
  <h3 class="title-5 m-b-35 text-center">Video Upload</h3>

  <div *ngIf="loadingStatus" class="alert alert-info text-center">Checking upload status...</div>

  <div *ngIf="warningMessage" class="alert alert-warning text-center">
    {{ warningMessage }}
  </div>

  <!-- Thumbnail Upload -->
  <div *ngIf="!themouploded" class="card mb-3" (drop)="handleDrop($event, 'thumb')" (dragover)="handleDragOver($event)" (dragleave)="handleDragLeave($event)">
    <div class="card-header"><strong>Upload Thumbnail</strong></div>
    <div class="card-body text-center" [class.dragging]="dragOver()">
      <p>Drag & drop a JPEG image or select below:</p>
      <input type="file" accept=".jpg,.jpeg" (change)="onThumbSelect($event.target.files[0])">
      <button class="btn btn-primary mt-2" (click)="uploadThumbnail()">Upload Thumbnail</button>
    </div>
  </div>

  <div *ngIf="themouploded" class="alert alert-success text-center">✅ Thumbnail Uploaded</div>

  <!-- Video Upload -->
  <div *ngIf="!vedouploded" class="card mb-3" (drop)="handleDrop($event, 'video')" (dragover)="handleDragOver($event)" (dragleave)="handleDragLeave($event)">
    <div class="card-header"><strong>Upload Video</strong></div>
    <div class="card-body text-center" [class.dragging]="dragOver()">
      <p>Drag & drop an MP4 video or select below:</p>
      <input type="file" accept=".mp4" (change)="onVideoSelect($event.target.files[0])">
      <button class="btn btn-primary mt-2" (click)="uploadVideo()">Upload Video</button>
      <div *ngIf="isUploading()" class="progress mt-3">
        <div class="progress-bar" [style.width.%]="progress()" role="progressbar">
          {{ progress() }}%
        </div>
      </div>
    </div>
  </div>

  <div *ngIf="vedouploded" class="alert alert-success text-center">✅ Video Uploaded</div>

  <!-- Verify Button -->
  <div class="text-center mt-3">
    <button class="btn btn-success" (click)="verifyAndFinish()" *ngIf="vedouploded && themouploded">
      Verify & Finish
    </button>
  </div>


<ngb-alert
  *ngFor="let a of alerts()"
  [type]="a.type"
  [dismissible]="true"
>
  {{ a.message }}
</ngb-alert></div>
